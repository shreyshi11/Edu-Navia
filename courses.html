<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>University Course Explorer</title>
  <link rel="stylesheet" href="courses.css" />
</head>
<body>

<!-- Header -->
<header>
  <div class="logo"><a href="index.html" style="color:black;text-decoration: none;">ğŸ“ Edu Navia</a></div>
  <nav>
    <a href="p.html">Universities</a>
    <a href="courses.html">Courses</a>
    <a href="consulting.html">Consulting</a>
    <a href="resource.html">Resources</a>
  </nav>
  <!--<div class="auth-buttons">
    <button class="login"><a href="login.html" style="color:black;text-decoration: none;">Login</a></button>
      <button class="signup"><a href="signup.html" style="color:white;text-decoration: none;">Sign Up</a></button>
  </div>-->
</header>

<!-- Hero Section -->
<!-- Hero Section -->
<section class="hero">
  <h1><span id="typewriter"></span><span class="cursor">|</span></h1>
</section>
<!-- Theme Toggle Button -->
<button id="themeToggle">ğŸŒ“</button>
<!-- Search Bar Section -->
<section class="search-section">
  <input type="text" id="courseSearch" placeholder="Search courses (e.g.,Computer Science,Medical)" />
  <button onclick="searchCourses()">ğŸ” Search</button>
  <div id="noResults">No Results Found</div>
</section>

<!-- Courses Grid -->
<section class="grid-container" id="coursesGrid">
  <!-- Add 24 course cards -->
  <div class="card" data-course-id="cs" data-course-name="Computer Science">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">ğŸ’»</div>
  <h3>Computer Science</h3>
  <p>Explore AI, ML, Web Dev, and more.</p>
  <a class="details-btn" href="computerScience.html" onclick="event.stopPropagation()">View Details</a>

</div>

<div class="card" data-course-id="biz" data-course-name="Business & Management">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">ğŸ“ˆ</div>
  <h3>Business & Management</h3>
  <p>Marketing, Finance, HR, and Operations.</p>
  <a class="details-btn" href="business_management.html" onclick="event.stopPropagation()">View Details</a>
</div>
<!-- Commerce -->
<div class="card" data-course-id="commerce" data-course-name="Commerce">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">ğŸ’¼</div>
  <h3>Commerce</h3>
  <p>Accounting, Business, Finance, Economics.</p>
  <a class="details-btn" href="commerce.html" onclick="event.stopPropagation()">View Details</a>
</div>

<div class="card" data-course-id="eng" data-course-name="Engineering">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">ğŸ—ï¸</div>
  <h3>Engineering</h3>
  <p>Mechanical, Civil, Electrical, and more.</p>
  <a class="details-btn" href="engineering.html" onclick="event.stopPropagation()">View Details</a>
</div>

<div class="card" data-course-id="med" data-course-name="Medicine">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">ğŸ©º</div>
  <h3>Medicine</h3>
  <p>MBBS, Nursing, Pharmacy programs.</p>
  <a class="details-btn" href="Medicine.html" onclick="event.stopPropagation()">View Details</a>
</div>

<div class="card" data-course-id="law" data-course-name="Law">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">âš–ï¸</div>
  <h3>Law</h3>
  <p>LLB, LLM, and International Law programs.</p>
  <a class="details-btn" href="Law.html" onclick="event.stopPropagation()">View Details</a>
</div>

<div class="card" data-course-id="art" data-course-name="Design & Arts">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">ğŸ¨</div>
  <h3>Design & Arts</h3>
  <p>Fashion, UI/UX, Interior, Animation.</p>
  <a class="details-btn" href="Design & Arts.html" onclick="event.stopPropagation()">View Details</a>
</div>

<div class="card" data-course-id="edu" data-course-name="Education">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">ğŸ“š</div>
  <h3>Education</h3>
  <p>Teaching degrees and educational research.</p>
  <a class="details-btn" href="Education.html" onclick="event.stopPropagation()">View Details</a>
</div>

<div class="card" data-course-id="soc" data-course-name="Social Sciences">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">ğŸ§ </div>
  <h3>Social Sciences</h3>
  <p>Psychology, Sociology, Anthropology.</p>
  <a class="details-btn" href="Social Sciences.html" onclick="event.stopPropagation()">View Details</a>
</div>

<div class="card" data-course-id="ds" data-course-name="Data Science">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">ğŸ“Š</div>
  <h3>Data Science</h3>
  <p>Big Data, Analytics, and Stats.</p>
  <a class="details-btn" href="datascience.html" onclick="event.stopPropagation()">View Details</a>
</div>

<div class="card" data-course-id="env" data-course-name="Environmental Studies">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">ğŸŒ±</div>
  <h3>Environmental Studies</h3>
  <p>Sustainability, Ecology, Climate.</p>
  <a class="details-btn" href="evs.html" onclick="event.stopPropagation()">View Details</a>
</div>

<div class="card" data-course-id="tour" data-course-name="Hospitality & Tourism">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">ğŸ¨</div>
  <h3>Hospitality & Tourism</h3>
  <p>Hotel, Events, Travel Management.</p>
  <a class="details-btn" href="hospitality&tourism.html" onclick="event.stopPropagation()">View Details</a>
</div>

<div class="card" data-course-id="lit" data-course-name="Languages & Literature">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">ğŸ“</div>
  <h3>Languages & Literature</h3>
  <p>English, French, Writing, Linguistics.</p>
  <a class="details-btn" href="language&literature.html" onclick="event.stopPropagation()">View Details</a>
</div>

<div class="card" data-course-id="arch" data-course-name="Architecture">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">ğŸ›ï¸</div>
  <h3>Architecture</h3>
  <p>Urban Planning, Interior Design.</p>
  <a class="details-btn" href="architecture.html" onclick="event.stopPropagation()">View Details</a>
</div>

<div class="card" data-course-id="media" data-course-name="Journalism & Media">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">ğŸ“°</div>
  <h3>Journalism & Media</h3>
  <p>Mass Comm, Reporting, Editing.</p>
  <a class="details-btn" href="journalism&media.html" onclick="event.stopPropagation()">View Details</a>
</div>

<div class="card" data-course-id="phy" data-course-name="Physics & Astronomy">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">ğŸ”­</div>
  <h3>Physics & Astronomy</h3>
  <p>Astrophysics, Quantum Mechanics.</p>
  <a class="details-btn" href="physics&astronomy.html" onclick="event.stopPropagation()">View Details</a>
</div>

<div class="card" data-course-id="math" data-course-name="Mathematics">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">â—</div>
  <h3>Mathematics</h3>
  <p>Pure Math, Applied Math, Statistics.</p>
  <a class="details-btn" href="mathematics.html" onclick="event.stopPropagation()">View Details</a>
</div>

<div class="card" data-course-id="bio" data-course-name="Biotechnology">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">ğŸ§¬</div>
  <h3>Biotechnology</h3>
  <p>Genetics, Molecular Biology.</p>
  <a class="details-btn" href="biotech.html" onclick="event.stopPropagation()">View Details</a>

</div>

<div class="card" data-course-id="phil" data-course-name="Philosophy & Ethics">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">ğŸ“œ</div>
  <h3>Philosophy & Ethics</h3>
  <p>Logic, Ethics, Worldview Studies.</p>
  <a class="details-btn" href="philosophy.html" onclick="event.stopPropagation()">View Details</a>

</div>

<div class="card" data-course-id="pol" data-course-name="Political Science">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">ğŸŒ</div>
  <h3>Political Science</h3>
  <p>Policy, Governance, Global Studies.</p>
  <a class="details-btn" href="politicalScience.html" onclick="event.stopPropagation()">View Details</a>

</div>

<div class="card" data-course-id="chem" data-course-name="Chemistry">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">ğŸ§ª</div>
  <h3>Chemistry</h3>
  <p>Organic, Inorganic, Physical Chem.</p>
  <a class="details-btn" href="chemistry.html" onclick="event.stopPropagation()">View Details</a>

</div>

<div class="card" data-course-id="agri" data-course-name="Agricultural Sciences">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">ğŸšœ</div>
  <h3>Agricultural Sciences</h3>
  <p>Crop Science, Agribusiness.</p>
  <a class="details-btn" href="agricultural.html" onclick="event.stopPropagation()">View Details</a>

</div>

<div class="card" data-course-id="ir" data-course-name="International Relations">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">ğŸ§‘â€ğŸ“</div>
  <h3>International Relations</h3>
  <p>Diplomacy, Geopolitics, Conflict.</p>
  <a class="details-btn" href="internationalRelations.html" onclick="event.stopPropagation()">View Details</a>

</div>

<div class="card" data-course-id="life" data-course-name="Life Sciences">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">ğŸ”¬</div>
  <h3>Life Sciences</h3>
  <p>Biology, Zoology, Botany.</p>
  <a class="details-btn" href="lifescience.html" onclick="event.stopPropagation()">View Details</a>

</div>

<div class="card" data-course-id="arts" data-course-name="Performing Arts">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">ğŸ­</div>
  <h3>Performing Arts</h3>
  <p>Drama, Dance, Theatre, Music.</p>
  <a class="details-btn" href="Performing_Arts.html" onclick="event.stopPropagation()">View Details</a>

</div>
<!-- Other Popular Course -->
<div class="card" data-course-id="other_popular" data-course-name="Other Popular Course">
  <button class="wishlist-btn" onclick="toggleWishlist(this)">ğŸ¤</button>
  <div class="icon">ğŸŒŸ</div>
  <h3>Other Popular Course</h3> 
  <p>Explore trending and emerging fields across industries.</p>
  <a class="details-btn" href="OtherC.html" onclick="event.stopPropagation()">View Details</a>
</div>


</section>
<!-- Footer Section -->
<footer>
    <div class="footer-container">
        <!--<div class="footer-logo">
            <img src="logo.jpg" alt="EduNavigator Logo" height="100" width="100px" />
        </div>-->

        <div class="social-icons">
            <a href="https://www.instagram.com" target="_blank" class="social-icon instagram">ğŸ“·</a>
            <a href="mailto:info@edunavia.com" target="_blank" class="social-icon mail">âœ‰ï¸</a>
            <a href="tel:+1234567890" target="_blank" class="social-icon telephone">ğŸ“</a>
            <a href="https://www.linkedin.com" target="_blank" class="social-icon linkedin">ğŸ”—</a>
            <a href="https://www.facebook.com" target="_blank" class="social-icon facebook">ğŸ“˜</a>
            <a href="https://wa.me/+1234567890" target="_blank" class="social-icon whatsapp">ğŸ’¬</a>
        </div>

        <div class="contact-info">
            <p>&copy; 2025 Edu Navia. All Rights Reserved.</p>
            <p>Follow Us on Social Media for Updates!</p>
        </div>
    </div>
</footer>



<!-- Voice Button -->
<button id="voiceBtn" title="Tap to speak about a course">ğŸ¤</button>

<!-- Load JS after all content -->
<script type="module" src="courses.js" defer></script>
<script type="module" defer>
  
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import {
  getFirestore, doc, getDoc, setDoc, updateDoc, arrayUnion, arrayRemove
} from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";
import {
  getAuth,
  onAuthStateChanged
} from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

// Your Firebase Config

let userRef = null;

// âœ… Helper: clean user name for document ID
// Firebase imports assumed via compat version or ES modules
// Assumes Firebase app, auth, firestore are already initialized

function getCleanedName(name) {
  return name?.toLowerCase().replace(/\s+/g, "_").replace(/[^\w\-]/g, "") || `user_${Date.now()}`;
}



// âœ… Set up user Firestore doc with cleaned displayName as ID
async function setupUser(user) {
  const cleanedName = getCleanedName(user.displayName);
  userRef = doc(db, "users", cleanedName);

  const snap = await getDoc(userRef);

  if (!snap.exists()) {
    await setDoc(userRef, {
      name: user.displayName || cleanedName,
      courseWishlist: []
    });
    console.log("âœ… Created Firestore user doc with ID:", cleanedName);
  } else {
    console.log("âœ… User doc already exists:", cleanedName);
  }

  preloadWishlist();
}

// âœ… Toggle Wishlist
window.toggleWishlist = async function (btn) {
  if (!userRef) {
    showLoginPopup();
    return;
  }

  const card = btn.closest(".card");
  if (!card) return;

  const courseName = card.dataset.courseName?.trim();
  if (!courseName) return;

  try {
    const snap = await getDoc(userRef);
    const wishlist = snap.data()?.courseWishlist || [];

    if (wishlist.includes(courseName)) {
      await updateDoc(userRef, {
        courseWishlist: arrayRemove(courseName)
      });
      btn.textContent = "ğŸ¤";
      console.log(`âŒ Removed: ${courseName}`);
    } else {
      await updateDoc(userRef, {
        courseWishlist: arrayUnion(courseName)
      });
      btn.textContent = "â¤ï¸";
      console.log(`âœ… Added: ${courseName}`);
    }
  } catch (err) {
    console.error("âŒ Error toggling wishlist:", err);
    alert("Error updating wishlist.");
  }
};

// âœ… Preload Heart Icons from Firestore
async function preloadWishlist() {
  if (!userRef) return;

  try {
    const snap = await getDoc(userRef);
    const wishlist = snap.data()?.courseWishlist || [];

    document.querySelectorAll(".card").forEach(card => {
      const courseName = card.dataset.courseName?.trim();
      const btn = card.querySelector(".wishlist-btn");

      if (courseName && btn) {
        btn.textContent = wishlist.includes(courseName) ? "â¤ï¸" : "ğŸ¤";
      }
    });
  } catch (err) {
    console.error("âŒ Error loading wishlist:", err);
  }
}

// âœ… Attach wishlist toggle events to all heart buttons
function bindWishlistButtons() {
  document.querySelectorAll(".wishlist-btn").forEach(btn => {
    btn.addEventListener("click", function (e) {
      e.stopPropagation(); // prevent parent card click
      toggleWishlist(this);
    });
  });
}

// âœ… Popup login
function showLoginPopup() {
  const popup = document.getElementById("login-popup");
  if (popup) popup.classList.remove("hidden");
}

function closeLoginPopup() {
  const popup = document.getElementById("login-popup");
  if (popup) popup.classList.add("hidden");
}

function bindCareerPathVisualizer() {
  document.querySelectorAll(".card").forEach(card => {
    card.addEventListener("click", (event) => {
      // Skip if wishlist or view details button was clicked
      if (
        event.target.classList.contains("wishlist-btn") || 
        event.target.classList.contains("details-btn")
      ) return;

      const courseName = card.dataset.courseName;
      showCareerPath(courseName); // Only called on card background click
    });
  });
}

// âœ… On DOM ready and user state resolved
document.addEventListener("DOMContentLoaded", () => {
  const closeBtn = document.getElementById("close-popup-btn");
  if (closeBtn) closeBtn.addEventListener("click", closeLoginPopup);

  onAuthStateChanged(auth, async (user) => {
    if (user) {
      await setupUser(user);
      setTimeout(() => {
        preloadWishlist();
        bindWishlistButtons();
        bindCareerPathVisualizer(); // optional
      }, 300);
    } else {
      userRef = null;
      console.warn("ğŸš« Not logged in");
      bindWishlistButtons(); // Still bind so hearts can trigger login
      bindCareerPathVisualizer();
    }
  });
});


</script>
<!-- ğŸŒŸ Login Required Popup -->
<div id="login-popup" class="popup hidden">
  <div class="popup-content">
    <h3>Please Log In</h3>
    <p>You need to log in to use the wishlist feature.</p>
    <button id="close-popup-btn">OK</button>
  </div>
</div>
<!-- Career Path Modal -->
<div id="careerModal" class="hidden">
  <div class="career-modal-content">
    <span id="closeCareerModal" class="close-btn">Ã—</span>
    <h2 id="careerTitle">Career Path</h2>
    <div class="career-path-flow" id="careerPathFlow"></div>
  </div>
</div>

<script src="carrer.js"></script>


</body>
</html>

